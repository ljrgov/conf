#!name=çŸ¥ä¹
#!desc=çŸ¥ä¹å»å¹¿å‘Š [å»ºè®®å¸è½½é‡è£…]\nä½œè€…ï¼š@RuCu6 @blackmatrix7
#!author=RuCu6 blackmatrix7
#!icon=https://gitlab.com/lodepuly/iconlibrary/-/raw/main/App_icon/120px/Zhihu.png
#!category=ğŸ“™å¹¿å‘Šæ¨¡å—
#!homepage=https://gitlab.com/lodepuly/vpn_tool/-/tree/master/Tool/Loon/Plugin
#!date=2024-02-19 20:05:06

[URL Rewrite]
# å±è”½ä¸‹å‘çš„é…ç½®ï¼Œå¦‚çš®è‚¤ç­‰
^https?:\/\/api\.zhihu\.com\/ab\/api\/v1\/products\/zhihu\/platforms\/ios\/config - reject
^https?:\/\/api\.zhihu\.com\/ad-style-service\/request - reject

[Map Local]
# å…ˆé—®æ˜¯ä¸æ˜¯å†é—®ä¸ºä»€ä¹ˆ
^https?:\/\/118\.89\.204\.198 data-type=text data="{}" status-code=200

^https?:\/\/103\.41\.167\.237 data-type=text data="{}" status-code=200

^https?:\/\/2402:4e00:1200:ed00:0:9089:6dac:96b6 data-type=text data=" " status-code=200

# æ‹¦æˆªå¼€å±å¹¿å‘Š
^https?:\/\/api\.zhihu\.com\/commercial_api\/launch_v2\? data-type=text data="{}" status-code=200

^https?:\/\/api\.zhihu\.com\/commercial_api\/real_time_launch_v2\? data-type=text data="{}" status-code=200

# æ‹¦æˆªå“ç‰Œæé—®å¹¿å‘Š
^https?:\/\/api\.zhihu\.com\/brand\/question\/\d+/card\? data-type=text data="{}" status-code=200

^https?:\/\/www\.zhihu\.com\/api\/v\d+\/brand\/question/\d+/card\? data-type=text data="{}" status-code=200

# å»é™¤åº•éƒ¨æ ‡ç­¾é¡µå…³æ³¨äººè§’æ ‡
^https?:\/\/api\.zhihu\.com\/moments\/tab_v2 data-type=text data="{}" status-code=200

# å»é™¤æ¶ˆæ¯é€šçŸ¥è§’æ ‡
^https?:\/\/api\.zhihu\.com\/(notifications\/v\d\/count) data-type=text data="{}" status-code=200

# æ‹¦æˆªå›ç­”ä¸‹çš„å¡ç‰‡å¹¿å‘Š
^https?:\/\/www\.zhihu\.com\/api\/v\d\/answers\/\d+\/recommendations data-type=text data="{}" status-code=200

# æ‹¦æˆªåº”ç”¨å†…å¼¹çª—
^https?:\/\/api\.zhihu\.com\/me\/guides data-type=text data="{}" status-code=200

# å»é™¤å…³æ³¨é¡µæœ€å¸¸è®¿é—®
^https?:\/\/api\.zhihu\.com\/moments\/recent data-type=text data="{}" status-code=200

# æ‹¦æˆªæ¨èé¡µé¡¶éƒ¨å¹¿å‘Š
^https?:\/\/api\.zhihu\.com\/api\/v4\/ecom_data\/config data-type=text data="{}" status-code=200

# åº•æ åŠ å·çš„å¹¿å‘Š
^https?:\/\/api\.zhihu\.com\/content-distribution-core\/bubble\/common\/settings data-type=text data="{}" status-code=200

# æ¨èé¡µæœç´¢æ å·¦ä¾§å›¾æ ‡
^https?:\/\/api\.zhihu\.com\/feed\/render\/revisit\/current_reading data-type=text data="{}" status-code=200

# ç–‘ä¼¼æ¨èé¡µå†…å®¹æ›´æ–°çº¢ç‚¹
^https?:\/\/api\.zhihu\.com\/feed\/render\/revisit\/tag_config data-type=text data="{}" status-code=200

# å»é™¤å›ç­”é¡µçš„ç›¸å…³æœç´¢
^https?:\/\/www\.zhihu\.com\/api\/v\d+\/search\/related_queries\/answer data-type=text data="{}" status-code=200

# æš‚ä¸æ¸…æ¥šä½œç”¨
^https?:\/\/api\.zhihu\.com\/commercial_api\/banners_v3\/app_topstory_banner data-type=text data="{}" status-code=200

[Script]
# è·å–ç”¨æˆ·ä¿¡æ¯ - éš”ç¦»ç”¨æˆ·æ•°æ®ï¼Œå¼€å¯æœ¬åœ°ä¼šå‘˜ç­‰
zheye.min = type=http-response, pattern=^https?:\/\/api\.zhihu\.com\/people\/, script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js, requires-body=true, max-size=-1, timeout=60

# å…³é”®è¯å±è”½ - è§£é”æœ¬åœ°çš„å…³é”®è¯å±è”½åŠŸèƒ½ï¼Œéœ€è¦å¼€å¯æœ¬åœ°VIP
zheye.min = type=http-request, pattern=^https?:\/\/api\.zhihu\.com\/feed-root\/block, script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js, requires-body=true, max-size=-1, timeout=60

# ä¼˜åŒ–è½¯ä»¶é…ç½® - ä¼˜åŒ–ä¸‹å‘çš„é…ç½®æ–‡ä»¶æ¥å®ç°æŸäº›æ•ˆæœ
zheye.min = type=http-response, pattern=^https?:\/\/m-cloud\.zhihu\.com\/api\/cloud\/config\/all\?, script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js, requires-body=true, max-size=-1, timeout=60

zheye.min = type=http-request, pattern=^https?:\/\/appcloud2\.zhihu\.com\/v\d+\/config, script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js, requires-body=true, max-size=-1, timeout=60

zheye.min = type=http-request, pattern=^https?:\/\/api\.zhihu\.com\/feed\/render\/tab\/config, script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js, requires-body=true, max-size=-1, timeout=60

# ç”¨æˆ·ä¿¡æ¯ - ä¿®æ”¹ç”¨æˆ·ç›å€¼
zheye.min = type=http-response, pattern=^https?:\/\/api\.zhihu\.com\/user-credit\/basis, script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js, requires-body=true, max-size=-1, timeout=60

# å…³æ³¨é¡µ - å†…å®¹ä¼˜åŒ–åŠå±è”½è½¬å‘çš„é»‘åå•ç”¨æˆ·æƒ³æ³•
zheye.min = type=http-response, pattern=^https?:\/\/api\.zhihu\.com\/moments_v3\?, script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js, requires-body=true, max-size=-1, timeout=60

# æ¨èé¡µ - ç§»é™¤é»‘åå•ç”¨æˆ·å‘å¸ƒçš„æ–‡ç« ã€å»é™¤å¹¿å‘Šï¼ŒåŠè‡ªå®šä¹‰ä¸€äº›å±è”½é¡¹ç›®
zheye.min = type=http-response, pattern=^https:\/\/api\.zhihu\.com\/topstory\/recommend, script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js, requires-body=true, max-size=-1, timeout=60

# é»‘åå•é¡µ - åŒæ­¥é»‘åå•æ•°æ®
zheye.min = type=http-response, pattern=^https?:\/\/api\.zhihu\.com\/settings\/blocked_users, script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js, requires-body=true, max-size=-1, timeout=60

# é—®é¢˜çš„å›ç­”åˆ—è¡¨ - ç§»é™¤é»‘åå•ç”¨æˆ·çš„å›ç­”ã€å»é™¤å¹¿å‘Š
zheye.min = type=http-response, pattern=^https?:\/\/api\.zhihu\.com\/(v4\/)?questions\/\d+, script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js, requires-body=true, max-size=-1, timeout=60

# å›ç­”ä¿¡æ¯æµ - ç§»é™¤é»‘åå•ç”¨æˆ·çš„å›ç­”ã€å»é™¤å¹¿å‘Š
zheye.min = type=http-response, pattern=^https?:\/\/api\.zhihu\.com\/next-(data|bff|render), script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js, requires-body=true, max-size=-1, timeout=60

# å›ç­”é¡µåº•éƒ¨è¯„è®ºæ‘˜è¦ - ç§»é™¤é»‘åå•ç”¨æˆ·å‘è¡¨çš„è¯„è®º
zheye.min = type=http-response, pattern=^https?:\/\/www\.zhihu\.com\/api\/v4\/comment_v5\/answers\/\d+\/abstract_comment\?, script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js, requires-body=true, max-size=-1, timeout=60

# è¯„è®ºé¡µåŠå­é¡µé¢ - å»é™¤é»‘åå•ç”¨æˆ·å‘è¡¨çš„è¯„è®º
zheye.min = type=http-response, pattern=^https?:\/\/api\.zhihu\.com\/(comment_v5\/)?(answers|comments?|articles|pins)\/\d+\/(root_|child_)?comments?, script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js, requires-body=true, max-size=-1, timeout=60

# æ¶ˆæ¯é¡µ - æŠ˜å å®˜æ–¹æ¶ˆæ¯ã€å±è”½è¥é”€æ¶ˆæ¯
zheye.min = type=http-response, pattern=^https?:\/\/api\.zhihu\.com\/notifications\/v3\/(message|timeline\/entry\/system_message), script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js, requires-body=true, max-size=-1, timeout=60

# å›ç­”é¡µ - å†…å®¹ä¼˜åŒ–ï¼Œä»˜è´¹ã€è¥é”€ã€æ¨å¹¿å†…å®¹æ–‡é¦–æé†’
zheye.min = type=http-response, pattern=^https?:\/\/www\.zhihu\.com\/appview\/v2\/answer\/.*(entry=(?!(preload-topstory|preload-search|preload-subscription)))?, script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js, requires-body=true, max-size=-1, timeout=60

# å›ç­”é¡µ - å±è”½ä¸‹ç¿»å‡ºç°çš„é»‘åå•ç”¨æˆ·çš„å›ç­”
zheye.min = type=http-response, pattern=^https?:\/\/api\.zhihu\.com\/next\?, script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js, requires-body=true, max-size=-1, timeout=60

# æ–‡ç« é¡µ - å»é™¤åº•éƒ¨å¹¿å‘Š
zheye.min = type=http-response, pattern=^https?:\/\/www\.zhihu\.com\/api\/v\d\/articles\/\d+\/recommendation\?, script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js, requires-body=true, max-size=-1, timeout=60

# çƒ­æ¦œé¡µ - å»é™¤å¹¿å‘Š
zheye.min = type=http-response, pattern=^https?:\/\/api\.zhihu\.com\/topstory\/hot-lists?(\?|\/), script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js, requires-body=true, max-size=-1, timeout=60

# æœç´¢é¡µ - å»é™¤é¢„ç½®å¹¿å‘Š
zheye.min = type=http-response, pattern=^https?:\/\/api\.zhihu\.com\/search\/preset_words\?, script-path=https://gist.githubusercontent.com/blackmatrix7/f5f780d0f56b319b6ad9848fd080bb18/raw/zheye.min.js, requires-body=true, max-size=-1, timeout=60

[MITM]
hostname = %APPEND% 118.89.204.198, 103.41.167.237, 2402:4e00:1200:ed00:0:9089:6dac:96b6, www.zhihu.com, api.zhihu.com, zhuanlan.zhihu.com, appcloud2.zhihu.com, m-cloud.zhihu.com, 103.41.167.236, 103.41.167.234, 103.41.167.235, 103.41.167.226